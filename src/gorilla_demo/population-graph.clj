;; gorilla-repl.fileformat = 1

;; **
;;; # Population Graphing
;;; 
;;; US Population change over time in a plot graph
;; **

;; @@
(ns gorilla-demo.us-population-graph
  (:require [gorilla-plot.core :as plot]
            [gorilla-demo.us-population :as population]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(defn- reducePopulation [population]
  (reduce + (map #(get % :value) population))
  )
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gorilla-demo.us-population-graph/reducePopulation</span>","value":"#'gorilla-demo.us-population-graph/reducePopulation"}
;; <=

;; @@
(defn buildPopulationByState [state & {:keys [divisor]
                                       :or {divisor 1}}]
  (map #(do [% (/ (reducePopulation (population/retrievePopulationByState state %)) divisor)]) (range 2000 2016)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gorilla-demo.us-population-graph/buildPopulationByState</span>","value":"#'gorilla-demo.us-population-graph/buildPopulationByState"}
;; <=

;; @@
(defn buildPopulationByCounty [state county & {:keys [divisor]
                                               :or {divisor 1}}]
  (vec (map #(do [% (/ (population/retrievePopulationByCounty state county %) divisor)]) (range 2000 2016))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gorilla-demo.us-population-graph/buildPopulationByCounty</span>","value":"#'gorilla-demo.us-population-graph/buildPopulationByCounty"}
;; <=

;; @@
(plot/list-plot (buildPopulationByState "Illinois" :divisor 1000000) 
                :x-title "Year" 
                :y-title "Population (millions)" 
                :joined true)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"6adb3b21-9ad0-4568-a9ae-dda4df309246","values":[{"x":2000,"y":12.434161},{"x":2001,"y":12.488445},{"x":2002,"y":12.525556},{"x":2003,"y":12.556006},{"x":2004,"y":12.589773},{"x":2005,"y":12.609903},{"x":2006,"y":12.643955},{"x":2007,"y":12.695866},{"x":2008,"y":12.747038},{"x":2009,"y":12.796778},{"x":2010,"y":12.843166},{"x":2011,"y":12.861882},{"x":2012,"y":12.875167},{"x":2013,"y":12.88958},{"x":2014,"y":12.882189},{"x":2015,"y":12.859995}]}],"marks":[{"type":"line","from":{"data":"6adb3b21-9ad0-4568-a9ae-dda4df309246"},"properties":{"enter":{"x":{"scale":"x","field":"x"},"y":{"scale":"y","field":"y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"6adb3b21-9ad0-4568-a9ae-dda4df309246","field":"x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"6adb3b21-9ad0-4568-a9ae-dda4df309246","field":"y"}}],"axes":[{"type":"x","scale":"x","title":"Year","titleOffset":30},{"type":"y","scale":"y","title":"Population (millions)","titleOffset":45}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"6adb3b21-9ad0-4568-a9ae-dda4df309246\", :values ({:x 2000, :y 12434161/1000000} {:x 2001, :y 2497689/200000} {:x 2002, :y 3131389/250000} {:x 2003, :y 6278003/500000} {:x 2004, :y 12589773/1000000} {:x 2005, :y 12609903/1000000} {:x 2006, :y 2528791/200000} {:x 2007, :y 6347933/500000} {:x 2008, :y 6373519/500000} {:x 2009, :y 6398389/500000} {:x 2010, :y 6421583/500000} {:x 2011, :y 6430941/500000} {:x 2012, :y 12875167/1000000} {:x 2013, :y 644479/50000} {:x 2014, :y 12882189/1000000} {:x 2015, :y 2571999/200000})}], :marks [{:type \"line\", :from {:data \"6adb3b21-9ad0-4568-a9ae-dda4df309246\"}, :properties {:enter {:x {:scale \"x\", :field \"x\"}, :y {:scale \"y\", :field \"y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"6adb3b21-9ad0-4568-a9ae-dda4df309246\", :field \"x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"6adb3b21-9ad0-4568-a9ae-dda4df309246\", :field \"y\"}}], :axes [{:type \"x\", :scale \"x\", :title \"Year\", :titleOffset 30} {:type \"y\", :scale \"y\", :title \"Population (millions)\", :titleOffset 45}]}}"}
;; <=

;; @@
(plot/list-plot (buildPopulationByCounty "Illinois" "Cook County" :divisor 1000) 
                :x-title "Year"
                :y-title "Population (thousands)"
                :joined true)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"4f95df37-40ed-4894-ae3d-c38c497f706e","values":[{"x":2000,"y":5373.418},{"x":2001,"y":5360.562},{"x":2002,"y":5328.775},{"x":2003,"y":5294.739},{"x":2004,"y":5252.021},{"x":2005,"y":5207.615},{"x":2006,"y":5165.495},{"x":2007,"y":5154.235},{"x":2008,"y":5161.831},{"x":2009,"y":5181.728},{"x":2010,"y":5200.95},{"x":2011,"y":5215.623},{"x":2012,"y":5232.69},{"x":2013,"y":5246.731},{"x":2014,"y":5248.704},{"x":2015,"y":5238.216}]}],"marks":[{"type":"line","from":{"data":"4f95df37-40ed-4894-ae3d-c38c497f706e"},"properties":{"enter":{"x":{"scale":"x","field":"x"},"y":{"scale":"y","field":"y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"4f95df37-40ed-4894-ae3d-c38c497f706e","field":"x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"4f95df37-40ed-4894-ae3d-c38c497f706e","field":"y"}}],"axes":[{"type":"x","scale":"x","title":"Year","titleOffset":30},{"type":"y","scale":"y","title":"Population (thousands)","titleOffset":45}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"4f95df37-40ed-4894-ae3d-c38c497f706e\", :values ({:x 2000, :y 2686709/500} {:x 2001, :y 2680281/500} {:x 2002, :y 213151/40} {:x 2003, :y 5294739/1000} {:x 2004, :y 5252021/1000} {:x 2005, :y 1041523/200} {:x 2006, :y 1033099/200} {:x 2007, :y 1030847/200} {:x 2008, :y 5161831/1000} {:x 2009, :y 647716/125} {:x 2010, :y 104019/20} {:x 2011, :y 5215623/1000} {:x 2012, :y 523269/100} {:x 2013, :y 5246731/1000} {:x 2014, :y 656088/125} {:x 2015, :y 654777/125})}], :marks [{:type \"line\", :from {:data \"4f95df37-40ed-4894-ae3d-c38c497f706e\"}, :properties {:enter {:x {:scale \"x\", :field \"x\"}, :y {:scale \"y\", :field \"y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"4f95df37-40ed-4894-ae3d-c38c497f706e\", :field \"x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"4f95df37-40ed-4894-ae3d-c38c497f706e\", :field \"y\"}}], :axes [{:type \"x\", :scale \"x\", :title \"Year\", :titleOffset 30} {:type \"y\", :scale \"y\", :title \"Population (thousands)\", :titleOffset 45}]}}"}
;; <=

;; @@
(plot/list-plot (buildPopulationByCounty "Illinois" "Tazewell County" :divisor 1000) 
                :x-title "Year"
                :y-title "Population (thousands)"
                :joined true)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f","values":[{"x":2000,"y":128.52},{"x":2001,"y":128.468},{"x":2002,"y":128.722},{"x":2003,"y":128.77},{"x":2004,"y":129.656},{"x":2005,"y":130.784},{"x":2006,"y":131.804},{"x":2007,"y":133.131},{"x":2008,"y":133.893},{"x":2009,"y":135.054},{"x":2010,"y":135.433},{"x":2011,"y":135.787},{"x":2012,"y":136.126},{"x":2013,"y":136.242},{"x":2014,"y":135.532},{"x":2015,"y":134.8}]}],"marks":[{"type":"line","from":{"data":"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f"},"properties":{"enter":{"x":{"scale":"x","field":"x"},"y":{"scale":"y","field":"y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f","field":"x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f","field":"y"}}],"axes":[{"type":"x","scale":"x","title":"Year","titleOffset":30},{"type":"y","scale":"y","title":"Population (thousands)","titleOffset":45}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f\", :values ({:x 2000, :y 3213/25} {:x 2001, :y 32117/250} {:x 2002, :y 64361/500} {:x 2003, :y 12877/100} {:x 2004, :y 16207/125} {:x 2005, :y 16348/125} {:x 2006, :y 32951/250} {:x 2007, :y 133131/1000} {:x 2008, :y 133893/1000} {:x 2009, :y 67527/500} {:x 2010, :y 135433/1000} {:x 2011, :y 135787/1000} {:x 2012, :y 68063/500} {:x 2013, :y 68121/500} {:x 2014, :y 33883/250} {:x 2015, :y 674/5})}], :marks [{:type \"line\", :from {:data \"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f\"}, :properties {:enter {:x {:scale \"x\", :field \"x\"}, :y {:scale \"y\", :field \"y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f\", :field \"x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9c0bb7b1-ec59-4500-9f0a-5a943b8f1f7f\", :field \"y\"}}], :axes [{:type \"x\", :scale \"x\", :title \"Year\", :titleOffset 30} {:type \"y\", :scale \"y\", :title \"Population (thousands)\", :titleOffset 45}]}}"}
;; <=

;; **
;;; # Unit Tests
;; **

;; @@
(buildPopulationByCounty "Illinois" "McLean County")
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2000</span>","value":"2000"},{"type":"html","content":"<span class='clj-long'>150844</span>","value":"150844"}],"value":"[2000 150844]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2001</span>","value":"2001"},{"type":"html","content":"<span class='clj-long'>152713</span>","value":"152713"}],"value":"[2001 152713]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2002</span>","value":"2002"},{"type":"html","content":"<span class='clj-long'>155882</span>","value":"155882"}],"value":"[2002 155882]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2003</span>","value":"2003"},{"type":"html","content":"<span class='clj-long'>157795</span>","value":"157795"}],"value":"[2003 157795]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2004</span>","value":"2004"},{"type":"html","content":"<span class='clj-long'>159096</span>","value":"159096"}],"value":"[2004 159096]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2005</span>","value":"2005"},{"type":"html","content":"<span class='clj-long'>160299</span>","value":"160299"}],"value":"[2005 160299]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2006</span>","value":"2006"},{"type":"html","content":"<span class='clj-long'>162925</span>","value":"162925"}],"value":"[2006 162925]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2007</span>","value":"2007"},{"type":"html","content":"<span class='clj-long'>165223</span>","value":"165223"}],"value":"[2007 165223]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2008</span>","value":"2008"},{"type":"html","content":"<span class='clj-long'>166825</span>","value":"166825"}],"value":"[2008 166825]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2009</span>","value":"2009"},{"type":"html","content":"<span class='clj-long'>168727</span>","value":"168727"}],"value":"[2009 168727]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2010</span>","value":"2010"},{"type":"html","content":"<span class='clj-long'>169832</span>","value":"169832"}],"value":"[2010 169832]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2011</span>","value":"2011"},{"type":"html","content":"<span class='clj-long'>170813</span>","value":"170813"}],"value":"[2011 170813]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2012</span>","value":"2012"},{"type":"html","content":"<span class='clj-long'>172599</span>","value":"172599"}],"value":"[2012 172599]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2013</span>","value":"2013"},{"type":"html","content":"<span class='clj-long'>174882</span>","value":"174882"}],"value":"[2013 174882]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2014</span>","value":"2014"},{"type":"html","content":"<span class='clj-long'>174110</span>","value":"174110"}],"value":"[2014 174110]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2015</span>","value":"2015"},{"type":"html","content":"<span class='clj-long'>173166</span>","value":"173166"}],"value":"[2015 173166]"}],"value":"[[2000 150844] [2001 152713] [2002 155882] [2003 157795] [2004 159096] [2005 160299] [2006 162925] [2007 165223] [2008 166825] [2009 168727] [2010 169832] [2011 170813] [2012 172599] [2013 174882] [2014 174110] [2015 173166]]"}
;; <=

;; @@
(buildPopulationByCounty "Illinois" "McLean County")
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2000</span>","value":"2000"},{"type":"html","content":"<span class='clj-long'>150844</span>","value":"150844"}],"value":"[2000 150844]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2001</span>","value":"2001"},{"type":"html","content":"<span class='clj-long'>152713</span>","value":"152713"}],"value":"[2001 152713]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2002</span>","value":"2002"},{"type":"html","content":"<span class='clj-long'>155882</span>","value":"155882"}],"value":"[2002 155882]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2003</span>","value":"2003"},{"type":"html","content":"<span class='clj-long'>157795</span>","value":"157795"}],"value":"[2003 157795]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2004</span>","value":"2004"},{"type":"html","content":"<span class='clj-long'>159096</span>","value":"159096"}],"value":"[2004 159096]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2005</span>","value":"2005"},{"type":"html","content":"<span class='clj-long'>160299</span>","value":"160299"}],"value":"[2005 160299]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2006</span>","value":"2006"},{"type":"html","content":"<span class='clj-long'>162925</span>","value":"162925"}],"value":"[2006 162925]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2007</span>","value":"2007"},{"type":"html","content":"<span class='clj-long'>165223</span>","value":"165223"}],"value":"[2007 165223]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2008</span>","value":"2008"},{"type":"html","content":"<span class='clj-long'>166825</span>","value":"166825"}],"value":"[2008 166825]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2009</span>","value":"2009"},{"type":"html","content":"<span class='clj-long'>168727</span>","value":"168727"}],"value":"[2009 168727]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2010</span>","value":"2010"},{"type":"html","content":"<span class='clj-long'>169832</span>","value":"169832"}],"value":"[2010 169832]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2011</span>","value":"2011"},{"type":"html","content":"<span class='clj-long'>170813</span>","value":"170813"}],"value":"[2011 170813]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2012</span>","value":"2012"},{"type":"html","content":"<span class='clj-long'>172599</span>","value":"172599"}],"value":"[2012 172599]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2013</span>","value":"2013"},{"type":"html","content":"<span class='clj-long'>174882</span>","value":"174882"}],"value":"[2013 174882]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2014</span>","value":"2014"},{"type":"html","content":"<span class='clj-long'>174110</span>","value":"174110"}],"value":"[2014 174110]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2015</span>","value":"2015"},{"type":"html","content":"<span class='clj-long'>173166</span>","value":"173166"}],"value":"[2015 173166]"}],"value":"[[2000 150844] [2001 152713] [2002 155882] [2003 157795] [2004 159096] [2005 160299] [2006 162925] [2007 165223] [2008 166825] [2009 168727] [2010 169832] [2011 170813] [2012 172599] [2013 174882] [2014 174110] [2015 173166]]"}
;; <=

;; @@
(buildPopulationByState "California")
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2000</span>","value":"2000"},{"type":"html","content":"<span class='clj-long'>33987977</span>","value":"33987977"}],"value":"[2000 33987977]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2001</span>","value":"2001"},{"type":"html","content":"<span class='clj-long'>34479458</span>","value":"34479458"}],"value":"[2001 34479458]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2002</span>","value":"2002"},{"type":"html","content":"<span class='clj-long'>34871843</span>","value":"34871843"}],"value":"[2002 34871843]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2003</span>","value":"2003"},{"type":"html","content":"<span class='clj-long'>35253159</span>","value":"35253159"}],"value":"[2003 35253159]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2004</span>","value":"2004"},{"type":"html","content":"<span class='clj-long'>35574576</span>","value":"35574576"}],"value":"[2004 35574576]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2005</span>","value":"2005"},{"type":"html","content":"<span class='clj-long'>35827943</span>","value":"35827943"}],"value":"[2005 35827943]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2006</span>","value":"2006"},{"type":"html","content":"<span class='clj-long'>36021202</span>","value":"36021202"}],"value":"[2006 36021202]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2007</span>","value":"2007"},{"type":"html","content":"<span class='clj-long'>36250311</span>","value":"36250311"}],"value":"[2007 36250311]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2008</span>","value":"2008"},{"type":"html","content":"<span class='clj-long'>36604337</span>","value":"36604337"}],"value":"[2008 36604337]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2009</span>","value":"2009"},{"type":"html","content":"<span class='clj-long'>36961229</span>","value":"36961229"}],"value":"[2009 36961229]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2010</span>","value":"2010"},{"type":"html","content":"<span class='clj-long'>37349363</span>","value":"37349363"}],"value":"[2010 37349363]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2011</span>","value":"2011"},{"type":"html","content":"<span class='clj-long'>37700034</span>","value":"37700034"}],"value":"[2011 37700034]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2012</span>","value":"2012"},{"type":"html","content":"<span class='clj-long'>38056055</span>","value":"38056055"}],"value":"[2012 38056055]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2013</span>","value":"2013"},{"type":"html","content":"<span class='clj-long'>38414128</span>","value":"38414128"}],"value":"[2013 38414128]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2014</span>","value":"2014"},{"type":"html","content":"<span class='clj-long'>38792291</span>","value":"38792291"}],"value":"[2014 38792291]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2015</span>","value":"2015"},{"type":"html","content":"<span class='clj-long'>39144818</span>","value":"39144818"}],"value":"[2015 39144818]"}],"value":"([2000 33987977] [2001 34479458] [2002 34871843] [2003 35253159] [2004 35574576] [2005 35827943] [2006 36021202] [2007 36250311] [2008 36604337] [2009 36961229] [2010 37349363] [2011 37700034] [2012 38056055] [2013 38414128] [2014 38792291] [2015 39144818])"}
;; <=

;; @@
(buildPopulationByState "California" :divisor 1000)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2000</span>","value":"2000"},{"type":"html","content":"<span class='clj-ratio'>33987977/1000</span>","value":"33987977/1000"}],"value":"[2000 33987977/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2001</span>","value":"2001"},{"type":"html","content":"<span class='clj-ratio'>17239729/500</span>","value":"17239729/500"}],"value":"[2001 17239729/500]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2002</span>","value":"2002"},{"type":"html","content":"<span class='clj-ratio'>34871843/1000</span>","value":"34871843/1000"}],"value":"[2002 34871843/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2003</span>","value":"2003"},{"type":"html","content":"<span class='clj-ratio'>35253159/1000</span>","value":"35253159/1000"}],"value":"[2003 35253159/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2004</span>","value":"2004"},{"type":"html","content":"<span class='clj-ratio'>4446822/125</span>","value":"4446822/125"}],"value":"[2004 4446822/125]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2005</span>","value":"2005"},{"type":"html","content":"<span class='clj-ratio'>35827943/1000</span>","value":"35827943/1000"}],"value":"[2005 35827943/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2006</span>","value":"2006"},{"type":"html","content":"<span class='clj-ratio'>18010601/500</span>","value":"18010601/500"}],"value":"[2006 18010601/500]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2007</span>","value":"2007"},{"type":"html","content":"<span class='clj-ratio'>36250311/1000</span>","value":"36250311/1000"}],"value":"[2007 36250311/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2008</span>","value":"2008"},{"type":"html","content":"<span class='clj-ratio'>36604337/1000</span>","value":"36604337/1000"}],"value":"[2008 36604337/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2009</span>","value":"2009"},{"type":"html","content":"<span class='clj-ratio'>36961229/1000</span>","value":"36961229/1000"}],"value":"[2009 36961229/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2010</span>","value":"2010"},{"type":"html","content":"<span class='clj-ratio'>37349363/1000</span>","value":"37349363/1000"}],"value":"[2010 37349363/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2011</span>","value":"2011"},{"type":"html","content":"<span class='clj-ratio'>18850017/500</span>","value":"18850017/500"}],"value":"[2011 18850017/500]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2012</span>","value":"2012"},{"type":"html","content":"<span class='clj-ratio'>7611211/200</span>","value":"7611211/200"}],"value":"[2012 7611211/200]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2013</span>","value":"2013"},{"type":"html","content":"<span class='clj-ratio'>4801766/125</span>","value":"4801766/125"}],"value":"[2013 4801766/125]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2014</span>","value":"2014"},{"type":"html","content":"<span class='clj-ratio'>38792291/1000</span>","value":"38792291/1000"}],"value":"[2014 38792291/1000]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2015</span>","value":"2015"},{"type":"html","content":"<span class='clj-ratio'>19572409/500</span>","value":"19572409/500"}],"value":"[2015 19572409/500]"}],"value":"([2000 33987977/1000] [2001 17239729/500] [2002 34871843/1000] [2003 35253159/1000] [2004 4446822/125] [2005 35827943/1000] [2006 18010601/500] [2007 36250311/1000] [2008 36604337/1000] [2009 36961229/1000] [2010 37349363/1000] [2011 18850017/500] [2012 7611211/200] [2013 4801766/125] [2014 38792291/1000] [2015 19572409/500])"}
;; <=

;; @@
(map #(do [(first %) (int (second %))]) (buildPopulationByState "California" :divisor 1000))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2000</span>","value":"2000"},{"type":"html","content":"<span class='clj-unkown'>33987</span>","value":"33987"}],"value":"[2000 33987]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2001</span>","value":"2001"},{"type":"html","content":"<span class='clj-unkown'>34479</span>","value":"34479"}],"value":"[2001 34479]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2002</span>","value":"2002"},{"type":"html","content":"<span class='clj-unkown'>34871</span>","value":"34871"}],"value":"[2002 34871]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2003</span>","value":"2003"},{"type":"html","content":"<span class='clj-unkown'>35253</span>","value":"35253"}],"value":"[2003 35253]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2004</span>","value":"2004"},{"type":"html","content":"<span class='clj-unkown'>35574</span>","value":"35574"}],"value":"[2004 35574]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2005</span>","value":"2005"},{"type":"html","content":"<span class='clj-unkown'>35827</span>","value":"35827"}],"value":"[2005 35827]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2006</span>","value":"2006"},{"type":"html","content":"<span class='clj-unkown'>36021</span>","value":"36021"}],"value":"[2006 36021]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2007</span>","value":"2007"},{"type":"html","content":"<span class='clj-unkown'>36250</span>","value":"36250"}],"value":"[2007 36250]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2008</span>","value":"2008"},{"type":"html","content":"<span class='clj-unkown'>36604</span>","value":"36604"}],"value":"[2008 36604]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2009</span>","value":"2009"},{"type":"html","content":"<span class='clj-unkown'>36961</span>","value":"36961"}],"value":"[2009 36961]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2010</span>","value":"2010"},{"type":"html","content":"<span class='clj-unkown'>37349</span>","value":"37349"}],"value":"[2010 37349]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2011</span>","value":"2011"},{"type":"html","content":"<span class='clj-unkown'>37700</span>","value":"37700"}],"value":"[2011 37700]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2012</span>","value":"2012"},{"type":"html","content":"<span class='clj-unkown'>38056</span>","value":"38056"}],"value":"[2012 38056]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2013</span>","value":"2013"},{"type":"html","content":"<span class='clj-unkown'>38414</span>","value":"38414"}],"value":"[2013 38414]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2014</span>","value":"2014"},{"type":"html","content":"<span class='clj-unkown'>38792</span>","value":"38792"}],"value":"[2014 38792]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>2015</span>","value":"2015"},{"type":"html","content":"<span class='clj-unkown'>39144</span>","value":"39144"}],"value":"[2015 39144]"}],"value":"([2000 33987] [2001 34479] [2002 34871] [2003 35253] [2004 35574] [2005 35827] [2006 36021] [2007 36250] [2008 36604] [2009 36961] [2010 37349] [2011 37700] [2012 38056] [2013 38414] [2014 38792] [2015 39144])"}
;; <=

;; @@

;; @@
